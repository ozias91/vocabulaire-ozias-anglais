<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Quiz Vocabulaire Espagnol</title>
    <link rel="stylesheet" href="vocabulaire.css" />
  </head>

  <body>
    <div id="container">
      <ul class="menu-quiz">
        <li><a href="index1.html">Quiz Vocabulaire englais </a></li>
      </ul>
      <h2>Quiz Français ↔ Espagnol</h2>

      <label for="direction">Direction :</label>
      <select id="direction" onchange="resetQuiz()">
        <option value="fr-es">Français → Espagnol</option>
        <option value="es-fr">Espagnol → Français</option>
      </select>

      <p id="question"></p>
      <input type="text" id="answer" placeholder="Ta réponse ici" />

      <br />
      <button onclick="checkAnswer()">Valider</button>
      <button onclick="nextQuestion()">Question suivante</button>

      <div id="feedback"></div>
      <p id="score">Score : 0</p>
    </div>

    <script>
      const vocab = {
        Salut: ["Hola"],
        Bonjour: ["Buenos días"],
        "Bonne après-midi": ["Buenas tardes"],
        "Bonne nuit": ["Buenas noches"],
        "Quel est ton nom ?": ["¿Cuál es su nombre?"],
        "Mon nom est": ["Me llamo"],
        "Désolé, je ne t'ai pas entendu": ["Lo siento, no te he oído"],
        "Où habites-tu ?": ["¿Dónde vives?"],
        "D’où venez-vous ?": ["¿De dónde eres?"],
        "Comment allez-vous ?": ["¿Cómo estás?"],
        "Bien, merci": ["Bien, gracias"],
        "Et vous ?": ["¿Y tú?"],
        Enchanté: ["Encantado de conocerte"],
        "Content de vous voir": ["Encantado de verte"],
        "Bonne journée": ["Que tengas un buen día"],
        "À plus tard": ["Hasta luego"],
        "À demain": ["Hasta mañana"],
        "Au revoir": ["Adiós"],
      };

      let questions = Object.entries(vocab);
      let index = 0;
      let score = 0;
      let direction = "fr-es";

      const questionEl = document.getElementById("question");
      const answerEl = document.getElementById("answer");
      const feedbackEl = document.getElementById("feedback");
      const scoreEl = document.getElementById("score");
      const directionEl = document.getElementById("direction");

      answerEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter") checkAnswer();
      });

      function resetQuiz() {
        direction = directionEl.value;
        index = 0;
        score = 0;
        scoreEl.textContent = `Score : ${score}`;
        questions = Object.entries(vocab).sort(() => Math.random() - 0.5);
        loadQuestion();
      }

      function loadQuestion() {
        if (index < questions.length) {
          const text =
            direction === "fr-es"
              ? questions[index][0]
              : questions[index][1][0];
          questionEl.textContent = `Traduire : ${text}`;
          answerEl.value = "";
          feedbackEl.innerHTML = "";
        } else {
          alert("Quiz terminé !");
          resetQuiz();
        }
      }

      function checkAnswer() {
        const userAns = answerEl.value.trim().toLowerCase();
        const correct =
          direction === "fr-es"
            ? questions[index][1].map((t) => t.toLowerCase())
            : [questions[index][0].toLowerCase()];

        if (correct.includes(userAns)) {
          feedbackEl.innerHTML = "<span class='correct'>✅ Correct !</span>";
          score++;
        } else {
          feedbackEl.innerHTML = `<span class='wrong'>❌ Faux !</span><br>Réponse attendue : ${correct.join(
            ", "
          )}`;
        }

        scoreEl.textContent = `Score : ${score}`;
      }

      function nextQuestion() {
        index++;
        loadQuestion();
      }

      resetQuiz();
    </script>
  </body>
</html>
